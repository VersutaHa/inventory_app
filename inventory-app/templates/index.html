<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£—á—ë—Ç –ú–°</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 15px; background: #f5f5f5; }
        h1 { text-align: center; color: #2c3e50; }
        .form-box { background: white; padding: 15px; border-radius: 8px; margin: 15px 0; }
        input, button, select { width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        button { background: #3498db; color: white; border: none; cursor: pointer; }
        table { width: 100%; border-collapse: collapse; background: white; margin-top: 10px; }
        th, td { padding: 10px; text-align: left; border-bottom: 1px solid #eee; }
        th { background: #34495e; color: white; }
        .flash { padding: 10px; margin: 10px 0; border-radius: 4px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <h1>üì¶ –£—á—ë—Ç –º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤</h1>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="flash {{ 'success' if category == 'message' else category }}">{{ message }}</div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <div class="form-box">
        <h3>‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—É</h3>
        <form method="POST" action="{{ url_for('add_nomenclature') }}">
            <input type="text" name="code" placeholder="–ö–æ–¥ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã *" required>
            <input type="text" name="name" placeholder="–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ *" required>
            <input type="text" name="category" placeholder="–ö–∞—Ç–µ–≥–æ—Ä–∏—è">
            <button type="submit">–î–æ–±–∞–≤–∏—Ç—å</button>
        </form>
    </div>

    {% if items %}
        <table>
            <thead>
                <tr>
                    <th>–ö–æ–¥</th>
                    <th>–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</th>
                    <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                    <th>–û—Å—Ç–∞—Ç–æ–∫</th>
                    <th>–ü–∞—Ä—Ç–∏–∏</th>
                </tr>
            </thead>
            <tbody>
                {% for item in items %}
                <tr>
                    <td>{{ item.code }}</td>
                    <td>{{ item.name }}</td>
                    <td>{{ item.category or '-' }}</td>
                    <td><strong>{{ item.total_qty }}</strong></td>
                    <td><a href="{{ url_for('nomenclature_detail', nomen_id=item.id) }}">–ü—Ä–æ—Å–º–æ—Ç—Ä</a></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p style="text-align:center;background:white;padding:20px;border-radius:8px;">
            üì≠ –ù–µ—Ç –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—É—é –∑–∞–ø–∏—Å—å.
        </p>
    {% endif }

    <div style="text-align:center;margin-top:30px;">
        <a href="{{ url_for('documents_list') }}">üìÑ –í—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã</a>
    </div>
</body>
</html>